<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GiftyBox</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Загрузочный экран -->
    <div id="loading-screen">
        <canvas id="star-canvas"></canvas>
        <h1>GiftyBox - выигрывай подарки</h1>
    </div>
    <!-- Новый layout под референс -->
    <div id="app">
        <!-- Верхняя панель -->
        <header class="top-bar">
            <div class="logo"><img src="assets/nft/basic-teddybear.gif" alt="logo"/></div>
            <button class="btn-wallet" id="btn-connect-wallet">Connect wallet</button>
            <div class="balance-row">
                <span id="main-balance">0.00</span>
                <img src="assets/ton-logo.svg" class="ton-logo"/>
            </div>
            <div class="profile-avatar-mini"><img src="assets/nft/mythic-neko-helmet.gif" alt="avatar"/></div>
        </header>
        <!-- Страницы -->
        <main>
            <!-- Main -->
            <section id="page-main" class="page active">
                <div class="promo-block giveaways">GIVEAWAYS<br><span>Contrary to popular belief</span></div>
                <div class="promo-block promo">FOLLOW THE PROMOTIONS!<br><span>Follow on our telegram!</span></div>
                <div class="main-cards">
                    <div class="main-card cases" onclick="showPage('cases')">
                        <div class="main-card-img"></div>
                        <div class="main-card-title">Play & Earn!<br><b>CASES</b></div>
                    </div>
                    <div class="main-card upgrade" onclick="showPage('upgrade')">
                        <div class="main-card-img"></div>
                        <div class="main-card-title">Upgrade your gifts!<br><b>UPGRADE</b></div>
                    </div>
                    <div class="main-card coming-soon">
                        <div class="main-card-img"></div>
                        <div class="main-card-title">COMING SOON</div>
                        <div class="main-card-timer">08 DAYS 04 HOURS 17 MIN 47 SEC</div>
                    </div>
                </div>
            </section>
            <!-- Cases -->
            <section id="page-cases" class="page">
                <div class="cases-balance-row">
                    <!-- Горизонтальный список баланса по кейсам -->
                </div>
                <div class="cases-list" id="cases-list-grid">
                    <!-- Кейсы будут рендериться динамически через JS -->
                </div>
            </section>
            <!-- Deposit -->
            <section id="page-deposit" class="page">
                <div class="deposit-block">
                    <button class="btn-wallet" id="btn-connect-wallet-2">Connect wallet</button>
                    <div class="deposit-balance">0.00 <img src="assets/ton-logo.svg"/></div>
                    <button class="btn btn-blue">Deposit</button>
                </div>
                <div id="ton-connect-modal" class="modal hidden">
                    <div class="modal-content">
                        <h3>Connect your TON wallet</h3>
                        <div class="qr-code"></div>
                        <div class="wallets-list">
                            <!-- Список кошельков -->
                        </div>
                    </div>
                </div>
            </section>
            <!-- Upgrade -->
            <section id="page-upgrade" class="page">
                <div class="upgrade-history-row">
                    <!-- История апгрейдов -->
                </div>
                <div class="upgrade-switch">
                    <button class="tab active">Gifts</button>
                    <button class="tab">TONs</button>
                </div>
                <div class="upgrade-circle">
                    <div class="upgrade-center">UPGRADE<br><span>Select prize</span></div>
                </div>
                <div class="upgrade-inventory-row">
                    <!-- Инвентарь для апгрейда -->
                </div>
            </section>
            <!-- Profile -->
            <section id="page-profile" class="page">
                <div class="profile-header">
                    <div class="profile-avatar"><img src="assets/nft/mythic-neko-helmet.gif" alt="avatar"></div>
                    <div class="profile-info">
                        <div class="profile-nick" id="profile-name"></div>
                        <div class="profile-balance">
                            <span id="profile-balance">0.00</span>
                            <img src="assets/ton-logo.svg"/>
                        </div>
                    </div>
                </div>
                <div class="profile-actions">
                    <button class="btn btn-blue" onclick="showPage('deposit')">Пополнить</button>
                    <button class="btn btn-grey" onclick="window.Telegram.WebApp.openTelegramLink('https://t.me/giftybox_support')">Поддержка</button>
                </div>
                <div class="profile-inventory">
                    <div class="empty-inventory">В вашем инвентаре пока ничего нет<br><button class="btn btn-blue" onclick="showPage('cases')">Открыть кейс</button></div>
                </div>
            </section>
            <!-- Referral -->
            <section id="page-referral" class="page">
                <div class="referral-block">
                    <div class="referral-header">10% YOUR PROFIT</div>
                    <button class="btn btn-blue">Invite a friend</button>
                    <button class="btn btn-blue">Copy link</button>
                    <div class="referral-balance-row">Referral balance: 0.00 <img src="assets/ton-logo.svg"/> <button class="btn btn-blue">Withdraw</button></div>
                    <div class="referral-stats-row">
                        <div>Invited<br>0</div>
                        <div>Active referrals<br>0</div>
                        <div>Deposits<br>0.00 <img src="assets/ton-logo.svg"/></div>
                        <div>Your profit for all time<br>0.00 <img src="assets/ton-logo.svg"/></div>
                    </div>
                </div>
            </section>
            <!-- Case -->
            <section id="page-case" class="page">
                <div class="case-detail-container">
                    <div class="case-detail-avatar" id="case-detail-avatar"></div>
                    <div class="case-detail-title" id="case-detail-title"></div>
                    <div class="case-detail-price-block">
                        <span class="case-detail-price" id="case-detail-price"></span>
                        <span class="case-detail-gcoins">Gcoins</span>
                    </div>
                </div>
                <div class="case-detail-prizes-title">Возможные подарки</div>
                <div class="case-detail-prizes-grid" id="case-detail-prizes-grid"></div>
            </section>
        </main>
        <!-- Нижнее меню -->
        <nav class="bottom-nav">
            <button class="nav-btn" data-page="main" onclick="showPage('main')">
                <span class="nav-icon"><img src="assets/icons/main.svg" alt="Main" width="28" height="28"></span><span>Main</span>
            </button>
            <button class="nav-btn" data-page="cases" onclick="showPage('cases')">
                <span class="nav-icon"><img src="assets/icons/cases.svg" alt="Cases" width="28" height="28"></span><span>Cases</span>
            </button>
            <button class="nav-btn" data-page="deposit" onclick="showPage('deposit')">
                <span class="nav-icon"><img src="assets/icons/deposit.svg" alt="Deposit" width="28" height="28"></span><span>Deposit</span>
            </button>
            <button class="nav-btn" data-page="upgrade" onclick="showPage('upgrade')">
                <span class="nav-icon"><img src="assets/icons/upgrade.svg" alt="Upgrade" width="28" height="28"></span><span>Upgrade</span>
            </button>
            <button class="nav-btn" data-page="profile" onclick="showPage('profile')">
                <span class="nav-icon"><img src="assets/icons/profile.svg" alt="Profile" width="28" height="28"></span><span>Profile</span>
            </button>
        </nav>
    </div>
    <!-- Контейнер для TON Connect UI -->
    <div id="ton-connect-ui" style="margin-bottom: 18px;"></div>
    <script src="nft-prices.js"></script>
    <script src="https://unpkg.com/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <script src="script.js"></script>
</body>
</html>