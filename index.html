<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GiftyBox</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Загрузочный экран -->
    <div id="loading-screen">
        <canvas id="star-canvas"></canvas>
        <h1>GiftyBox - выигрывай подарки</h1>
    </div>
    <!-- Основное приложение -->
    <div id="main-content" class="hidden">
        <!-- Баланс -->
        <div id="gcoins" class="gcoins-display">1000</div>
        <!-- Главная -->
        <div id="page-home" class="page active">
            <h2 class="page-title">Кейсы</h2>
            <div class="case-grid">
                <div class="case-card case-basic" onclick="openCasePage('basic')">
                    <div class="case-gif">
                        <img src="assets/nft/basic-heart.gif" alt="Basic Case">
                    </div>
                    <div class="case-name">Basic Case</div>
                </div>
                <div class="case-card case-standard" onclick="openCasePage('standard')">
                    <div class="case-gif">
                        <img src="assets/nft/basic-rocket.gif" alt="Standard Case">
                    </div>
                    <div class="case-name">Standard Case</div>
                </div>
                <div class="case-card case-rare" onclick="openCasePage('rare')">
                    <div class="case-gif">
                        <img src="assets/nft/basic-trophy.gif" alt="Rare Case">
                    </div>
                    <div class="case-name">Rare Case</div>
                </div>
                <div class="case-card case-epic" onclick="openCasePage('epic')">
                    <div class="case-gif">
                        <img src="assets/nft/epic-light-sword.gif" alt="Epic Case">
                    </div>
                    <div class="case-name">Epic Case</div>
                </div>
                <div class="case-card case-legendary" onclick="openCasePage('legendary')">
                    <div class="case-gif">
                        <img src="assets/nft/mythic-neko-helmet.gif" alt="Legendary Case">
                    </div>
                    <div class="case-name">Legendary Case</div>
                </div>
                <div class="case-card case-mythic" onclick="openCasePage('mythic')">
                    <div class="case-gif">
                        <img src="assets/nft/mythic-durov-cap.gif" alt="Mythic Case">
                    </div>
                    <div class="case-name">Mythic Case</div>
                </div>
            </div>
        </div>
        <!-- Страница кейса -->
        <div id="page-case" class="page">
            <h2 id="case-title" class="page-title"></h2>
            <div class="case-roulette-container">
                <div class="slots-viewport">
                    <div id="nft-slots-container"></div>
                    <div class="center-indicator"></div>
                </div>
            </div>
            <div class="case-buttons">
                <button class="btn btn-red" onclick="openCase()">Открыть</button>
                <button class="btn btn-blue" onclick="demoCase()">Демо режим</button>
            </div>
            <div id="case-content-list"></div>
        </div>
        <!-- Инвентарь -->
        <div id="page-inventory" class="page">
            <h2 class="page-title">Мои подарки</h2>
            <div id="inventory-list"></div>
        </div>
        <!-- Апгрейды -->
        <div id="page-upgrades" class="page">
            <h2 class="page-title">Апгрейды</h2>
            <div class="upgrade-circle"></div>
            <div class="upgrade-section">
                <div>Подарок для апгрейда</div>
                <div id="upgrade-current"></div>
            </div>
            <div class="upgrade-section">
                <div>Возможные апгрейды</div>
                <div id="upgrade-options"></div>
            </div>
            <!-- Добавляю селекты для апгрейда -->
            <div class="upgrade-selects">
                <select id="current-nft"></select>
                <select id="target-nft"></select>
                <button onclick="upgradeNFT()">Апгрейд</button>
            </div>
        </div>
        <!-- Профиль -->
        <div id="page-profile" class="page">
            <h2 class="page-title">Профиль</h2>
            <div class="profile-card">
                <div class="profile-avatar"><img src="assets/nft/mythic-neko-helmet.gif" alt="Avatar"></div>
                <div class="profile-info">
                    <div id="profile-username">@username</div>
                    <div id="profile-balance">Баланс: <span>1000</span> G-Coins</div>
                </div>
            </div>
            <div class="profile-nft-list" id="profile-nft-list">
                <!-- NFT будут добавляться динамически -->
            </div>
            <div class="profile-ref">Реферальная система: 5%</div>
            <!-- Добавляю ссылку для приглашения -->
            <a id="referral-link" href="#" target="_blank">Пригласить друга</a>
        </div>
        
        <!-- Детальный просмотр NFT -->
        <div id="page-nft-detail" class="page">
            <div class="nft-detail-header">
                <button class="back-btn" onclick="goBack()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 12H5M12 19L5 12L12 5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <h2 id="nft-detail-title" class="page-title">NFT</h2>
            </div>
            <div class="nft-detail-content">
                <div class="nft-detail-image">
                    <img id="nft-detail-img" src="" alt="NFT">
                </div>
                <div class="nft-detail-info">
                    <h3 id="nft-detail-name">Название NFT</h3>
                    <div class="nft-detail-rarity" id="nft-detail-rarity">Редкость</div>
                </div>
                <div class="nft-detail-actions">
                    <button class="btn btn-sell" id="nft-sell-btn" onclick="sellNFT()">
                        Продать за <span id="nft-sell-price">0</span> GCoins
                    </button>
                    <button class="btn btn-withdraw" onclick="withdrawNFT()">
                        Вывести
                    </button>
                </div>
            </div>
        </div>
        <!-- Нижнее меню -->
        <nav class="bottom-nav">
            <button class="nav-btn" data-page="home" onclick="showPage('home')">
                <span class="nav-icon"> <!-- Домик -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="4" y="10" width="16" height="10" fill="white"/>
                        <polygon points="12,3 2,12 22,12" fill="white"/>
                    </svg>
                </span>
                <span>Главная</span>
            </button>
            <button class="nav-btn" data-page="inventory" onclick="showPage('inventory')">
                <span class="nav-icon"> <!-- Подарок -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="4" y="8" width="16" height="12" fill="white"/>
                        <rect x="8" y="4" width="8" height="4" fill="white"/>
                    </svg>
                </span>
                <span>Инвентарь</span>
            </button>
            <button class="nav-btn" data-page="upgrades" onclick="showPage('upgrades')">
                <span class="nav-icon"> <!-- Стрелка вверх -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <polygon points="12,4 4,20 20,20" fill="white"/>
                    </svg>
                </span>
                <span>Апгрейды</span>
            </button>
            <button class="nav-btn" data-page="profile" onclick="showPage('profile')">
                <span class="nav-icon"> <!-- Человек -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="8" r="4" fill="white"/>
                        <rect x="6" y="14" width="12" height="6" fill="white"/>
                    </svg>
                </span>
                <span>Профиль</span>
            </button>
        </nav>
    </div>
    <script src="script.js"></script>
</body>
</html>